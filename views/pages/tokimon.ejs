<!DOCTYPE html>

<head>
    <meta charset="utf-8">
    <% if (results.length) { %>
    <title>Tokimon Database - <%= results[0].name %></title>
    <% }
    else { %> 
    <title>Tokimon Database</title>
    <% } %>
    <link rel="stylesheet" href="/stylesheets/tokimon.css">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
    <script src="/scripts/tokimon.js" defer></script>
</head>

<html lang="eng">
    <div class="sidebar">
        <button id="homeBtn">Home</button>
    </div>

    <body>
        <main> 
            <% if (results.length) { %>
            <h1><%= results[0].name %></h1>
            <% }
            else { %> 
            <h1>This Tokimon doesn't exist</h1>
            <% } %>
            
            <table>
                <tr>
                    <th>Name</th>
                    <th>Weight</th>
                    <th>Height</th>
                    <th>Fly</th>
                    <th>Fight</th>
                    <th>Fire</th>
                    <th>Water</th> 
                    <th>Electric</th>
                    <th>Ice</th>
                    <th>Total</th>
                    <th>Trainer</th>
                    <th>Gender</th>
                    <th>Friendship</th>
                    <th>Experience</th> 
                </tr>
                <% if (results.length) {
                    for (var i = 0; i < results.length; i++) { %>
                <tr>
                    <td><%= results[i].name %></td>
                    <td><%= results[i].weight %></td>
                    <td><%= results[i].height %></td>
                    <td><%= results[i].fly %></td>
                    <td><%= results[i].fight %></td>
                    <td><%= results[i].fire %></td>
                    <td><%= results[i].water %></td> 
                    <td><%= results[i].electric %></td>
                    <td><%= results[i].ice %></td>
                    <td><%= results[i].total %></td>
                    <td><%= results[i].trainer %></td>
                    <td><%= results[i].gender %></td>
                    <td><%= results[i].friendship %></td>
                    <td><%= results[i].experience %></td> 
                </tr>
                    <% }
                }
                else { %>
                <tr>
                    <td colspan="15">No Tokimon</td>
                </tr>
                <% } %>

            </table>
            
            <canvas id="figures" height=100>                
            </canvas>
        </main>
    </body>
</html>


<script>
    var canvas = document.getElementById("figures");
    var width = canvas.width;
    var height = canvas.height;
    var curr = "<%= results[0].name %>"
    var results = "<%= all_results %>"
    var ctx = canvas.getContext("2d")
    var max_height = 0
    var max_weight = 0

    // Determine max weight and height
    for (var i = 0; i < results.length; i++) {
        if (results[i].weight > max_weight) {
            max_weight = results[i].weight
        }
        if (results[i].height > max_height) {
            max_height = results[i].height
        }
    }

    var x = 0
    // Draw rectangles
    for (var i = 0; i < results.length; i++) {
        ctx.beginPath()
        ctx.rect(0, 20, 50, 50)
        ctx.stroke()
    }
</script>